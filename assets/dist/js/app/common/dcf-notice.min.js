/**
 * @project        dcf
 * @author         Digital Campus Nebraska
 * @website        http://digitalcampus.us/
 * @copyright      Copyright (c) 2018, BSD-3-Clause
 *
 */
"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t){"function"==typeof define&&define.amd?define(["./dcf-uuidGen"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=t(require("./dcf-uuidGen")):e.dcfWidgetNotice=t(e.dcfHelperUuidv4)}(void 0,function(e){var t={},i=document.querySelectorAll('[data-widget="notice"]'),o=!!document.querySelector('[id*="unl-widget-fixedBottom-"]');i=[].slice.call(i);var n={notify:["dcf-notice","unl-notice-notify"],success:["dcf-notice","unl-notice-success"],alert:["dcf-notice","unl-notice--alert"],fatal:["dcf-notice","unl-notice--fatal"]},r={current:["uno"],nav:["foo"],fixedBottom:["bar","dcf-fixed","dcf-notice-fixedBottom","dcf-pin-bottom","dcf-pin-right","dcf-pin-left"],fixedBottomLeft:["zoink"]},c={slideInScroll:["baz"],slideUp:["car"]},s=["dcf-absolute","dcf-pin-top","dcf-pin-right","dcf-mt-3","dcf-mr-3","dcf-btn","dcf-btn-tertiary","js-notice-toggle"];function d(e){var t=document.querySelector("main"),i=t.firstElementChild;t.insertBefore(e,i)}function a(e,t,i,o){var n="true"===t.getAttribute("aria-expanded");n?(t.innerText="Expand",i.classList.add("dcf-notice-title-collapse"),o.classList.add("dcf-notice-message-collapse"),e.id&&localStorage.setItem(e.id,"collapsed")):(t.innerText="Collapse",o.classList.remove("dcf-notice-message-collapse"),i.classList.remove("dcf-notice-title-collapse"),e.id&&localStorage.setItem(e.id,"expanded")),n=new Boolean(!n),t.setAttribute("aria-expanded",n.toString())}function l(t,i){var o=document.createElement("button");if(s.forEach(function(e){return o.classList.add(e)}),i){var n=t.querySelector(".js-notice-title"),r=t.querySelector(".js-notice-message"),c=r.id||e();if(o.innerText="collapse",o.setAttribute("aria-expanded","true"),!n)return void console.error("Your notice is missing a title.");if(!r)return void console.error("Your notice is missing a message.");n.classList.add("dcf-notice-title"),!r.id&&(r.id=c),o.setAttribute("aria-controls",c),r.classList.add("dcf-notice-message"),o.addEventListener("click",function(){a(t,o,n,r)})}else o.innerText="close",o.addEventListener("click",function(){var e;(e=t).addEventListener("transitionend",function t(i){"max-height"===i.propertyName&&(e.classList.add("dcf-d-none"),e.removeEventListener("transitionend",t),document.querySelector("main").focus())}),e.classList.add("dcf-notice-fixedBottom--close"),localStorage.setItem(e.id,"closed")});t.insertBefore(o,t.firstElementChild)}var f=!1,u=void 0,m=void 0,p=window.matchMedia("(min-width: 480px)"),g={root:null,rootMargin:"0px",threshold:.65},v={root:null,rootMargin:"0px",threshold:.8};function h(e,t){e.forEach(function(e){e.isIntersecting&&e.intersectionRatio>0&&e.intersectionRatio>=t.thresholds[0]&&(c.slideInScroll.forEach(function(t){return e.target.classList.add(t)}),f=!0,t.disconnect())})}function y(e){f||(e.matches?(!1,i.forEach(function(e){(m=new IntersectionObserver(h,v)).observe(e)}),u&&u.disconnect()):(!0,i.forEach(function(e){(u=new IntersectionObserver(h,g)).observe(e)}),m&&m.disconnect()))}function b(e){if(!e.initialized){var t=e.dataset.noticeType,i=e.dataset.location,s="true"===e.dataset.animation,f="true"===e.dataset.collapsible;if(n[t]?n[t].forEach(function(t){return e.classList.add(t)}):n.notify.forEach(function(t){return e.classList.add(t)}),"fixedBottom"===i)if(o)console.error("Only one fixed to bottom notice may exist on a page");else{if(e.id?e.id="dcf-widget-fixedBottom--"+e.id:console.info("An id attribute needs to be provided for the fixed to bottom notice to function properly with localStorage"),!f&&"closed"===localStorage.getItem(e.id))return void e.classList.add("dcf-d-none");r[i]&&r[i].forEach(function(t){return e.classList.add(t)}),l(e,f),d(e),o=!0}else r[i]?r[i].forEach(function(t){return e.classList.add(t)}):r.current.forEach(function(t){return e.classList.add(t)}),"nav"===i&&d(e);if(s&&("fixedBottom"===i?c.slideUp.forEach(function(t){return e.classList.add(t)}):"IntersectionObserver"in window&&(e.classList.add("hide-animate"),p.addListener(function(){return y(p)}),y(p))),e.initialized=!0,f&&"collapsed"===localStorage.getItem(e.id)){var u=e.querySelector(".js-notice-title"),m=e.querySelector(".js-notice-message"),g=e.querySelector(".js-notice-toggle");if(!u)return void console.error("Your notice is missing a title.");if(!m)return void console.error("Your notice is missing a message.");a(e,g,u,m)}}}return t.initialize=function(){i.forEach(function(e){b(e)})},t.create=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"main",n=arguments[4];if(0!==e.length)if(0!==t.length){var r=document.createElement("div"),c=document.createElement("h2"),s=document.createElement("p"),a=Object.keys(i);if(r.setAttribute("role","alert"),a.forEach(function(e){"id"===e?r.id=i[e]:r.setAttribute("data-"+e,i[e])}),"string"==typeof e&&(c.innerText=e),"string"==typeof t&&(s.innerText=t),c.classList.add("js-notice-title"),s.classList.add("js-notice-message"),r.appendChild(c),r.appendChild(s),"main"===o&&void 0===n)d(r);else void 0===n&&(n="afterbegin"),document.querySelector(o).insertAdjacentElement(n,r);b(r)}else console.error("Please provide a notice message");else console.error("Please provide a notice title")},t});
//# sourceMappingURL=dcf-notice.min.js.map
